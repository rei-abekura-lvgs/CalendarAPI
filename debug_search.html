<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>検索API デバッグ</title>
</head>
<body>
    <h1>検索API デバッグページ</h1>
    <div id="results"></div>
    
    <script src="js/search-api.js"></script>
    <script>
        async function debugSearch() {
            console.log('=== デバッグ開始 ===');
            
            // クラスの存在確認
            console.log('CalendarSearchAPI存在:', typeof CalendarSearchAPI);
            
            if (typeof CalendarSearchAPI !== 'undefined') {
                try {
                    const api = new CalendarSearchAPI();
                    console.log('API インスタンス作成成功:', api);
                    console.log('プロトタイプメソッド:', Object.getOwnPropertyNames(CalendarSearchAPI.prototype));
                    console.log('searchIchiryuManbaiDays:', typeof api.searchIchiryuManbaiDays);
                    
                    if (typeof api.searchIchiryuManbaiDays === 'function') {
                        console.log('一粒万倍日検索テスト開始');
                        const results = await api.searchIchiryuManbaiDays(2025, 6);
                        console.log('検索結果:', results);
                        document.getElementById('results').innerHTML = 
                            `検索成功: ${results.length}件の結果<br>` + 
                            results.slice(0, 3).map(r => r.date).join('<br>');
                    } else {
                        console.error('searchIchiryuManbaiDaysメソッドが見つかりません');
                        document.getElementById('results').innerHTML = 'メソッドが見つかりません';
                    }
                } catch (error) {
                    console.error('API作成エラー:', error);
                    document.getElementById('results').innerHTML = 'エラー: ' + error.message;
                }
            } else {
                console.error('CalendarSearchAPIクラスが見つかりません');
                document.getElementById('results').innerHTML = 'クラスが見つかりません';
            }
        }
        
        // ページ読み込み完了後にテスト実行
        document.addEventListener('DOMContentLoaded', debugSearch);
    </script>
</body>
</html>