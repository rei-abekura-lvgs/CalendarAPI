# 運勢機能の構造分析とリデザイン提案

## 現在の問題点

### 1. 名称の不統一
- 「運勢診断」ページに「総合運勢」が表示される
- 機能名と内容が一致していない

### 2. データ種類の混在
- 全体データ（39項目の暦データ）
- 個人データ（生年月日・時間・性別による診断）
- どちらも「今日のデータ」として混在

## データ種類の分類

### A. 全体データ（共通データ）
**特徴**: その日に生まれた人全員に共通
**データ源**: API の39項目データ
**内容例**:
- 祝日、六曜、干支
- パワーストーン、アロマ
- 一粒万倍日、空亡情報
- 色、花言葉、キーワード

**メリット**:
- ✓ データが豊富（39項目）
- ✓ 即座に表示可能
- ✓ 誰でも同じ結果
- ✓ 文化的・教育的価値

**デメリット**:
- ✗ 個人に特化していない
- ✗ 生年月日を活用できない

### B. 個人データ（パーソナライズ）
**特徴**: 生年月日・時間・性別による個人分析
**データ源**: 四柱推命計算エンジン
**内容例**:
- 四柱（年月日時柱）
- 大運・流年分析
- 個人空亡期間
- 性格分析、相性診断

**メリット**:
- ✓ 高度にパーソナライズ
- ✓ 専門的な四柱推命分析
- ✓ 長期運勢予測
- ✓ ユーザーエンゲージメント高

**デメリット**:
- ✗ 入力が必要
- ✗ 計算時間がかかる
- ✗ 複雑で理解が困難な場合

## 提案する新構造

### ページ構成案

#### 1. メインページ（index.html）
- **今日の暦データ** - 全体データ表示
- 39項目の豊富な情報
- 誰でもすぐアクセス可能

#### 2. 総合運勢ページ（fortune.html）
**名称変更**: 「運勢診断」→「総合運勢」
**内容**: 全体データベースの運勢機能
- 今日の総合運勢（全員共通）
- 週間運勢
- 指定日運勢
- 六曜・一粒万倍日検索

#### 3. 個人診断ページ（personal.html）新設
**名称**: 「個人運勢診断」または「四柱推命診断」
**内容**: 完全パーソナライズ機能
- 生年月日時間入力
- 四柱推命分析
- 個人空亡診断
- 今日との相性

## 「今日のデータ」の定義

### 全体データとしての「今日」
- カレンダー上の2025年6月23日のデータ
- その日の共通属性（祝日、六曜、干支など）
- **誰が見ても同じ結果**

### 個人データとしての「今日」
- ユーザーの生年月日 × 今日の日付
- 四柱推命での相性計算
- **人によって異なる結果**

## 推奨構造

```
暦データAPI
├── index.html          # 今日の暦データ（39項目表示）
├── fortune.html        # 総合運勢（全員共通）
│   ├── 今日の総合運勢
│   ├── 週間運勢  
│   ├── 指定日運勢
│   └── 特別日検索
└── personal.html       # 個人診断（要入力）
    ├── 四柱推命診断
    ├── 個人空亡診断
    ├── 今日との相性
    └── 長期運勢予測
```

## メリット・デメリット比較

### 分離案（推奨）
**メリット**:
- ✓ 目的が明確
- ✓ ユーザーが迷わない
- ✓ それぞれに最適化可能
- ✓ 負荷分散

**デメリット**:
- ✗ ページ数増加
- ✗ 若干の重複コード

### 統合案
**メリット**:
- ✓ 1ページで完結
- ✓ コード管理簡単

**デメリット**:
- ✗ 機能が複雑化
- ✗ ユーザーが混乱
- ✗ パフォーマンス低下

## 結論・推奨案

**3ページ分離構造**を推奨します：

1. **メインページ**: シンプルな今日の暦データ表示
2. **総合運勢ページ**: 全員共通の運勢機能
3. **個人診断ページ**: パーソナライズされた四柱推命診断

これにより、用途が明確になり、ユーザーエクスペリエンスが向上します。